{"version":3,"file":"sqlite.formatter.js","names":["reservedCommands","expandPhrases","reservedSetOperations","reservedJoins","reservedPhrases","SqliteFormatter","Tokenizer","reservedDependentClauses","reservedKeywords","keywords","reservedFunctionNames","functions","stringTypes","quote","prefixes","identTypes","paramTypes","positional","numbered","named","operators","Formatter"],"sources":["../../../src/languages/sqlite/sqlite.formatter.ts"],"sourcesContent":["import { expandPhrases } from 'src/expandPhrases';\nimport Formatter from 'src/formatter/Formatter';\nimport Tokenizer from 'src/lexer/Tokenizer';\nimport { functions } from './sqlite.functions';\nimport { keywords } from './sqlite.keywords';\n\nconst reservedCommands = expandPhrases([\n  // queries\n  'WITH [RECURSIVE]',\n  'SELECT [ALL | DISTINCT]',\n  'FROM',\n  'WHERE',\n  'GROUP BY',\n  'HAVING',\n  'WINDOW',\n  'PARTITION BY',\n  'ORDER BY',\n  'LIMIT',\n  'OFFSET',\n  // Data manipulation\n  // - insert:\n  'INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO',\n  'REPLACE INTO',\n  'VALUES',\n  // - update:\n  'UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]',\n  'SET',\n  // - delete:\n  'DELETE FROM',\n  // Data definition\n  'CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]',\n  'CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]',\n  'DROP TABLE [IF EXISTS]',\n  // - alter table:\n  'ALTER TABLE',\n  'ADD [COLUMN]',\n  'DROP [COLUMN]',\n  'RENAME [COLUMN]',\n  'RENAME TO',\n\n  // other\n  'SET SCHEMA',\n]);\n\nconst reservedSetOperations = expandPhrases(['UNION [ALL]', 'EXCEPT', 'INTERSECT']);\n\n// joins - https://www.sqlite.org/syntax/join-operator.html\nconst reservedJoins = expandPhrases([\n  'JOIN',\n  '{LEFT | RIGHT | FULL} [OUTER] JOIN',\n  '{INNER | CROSS} JOIN',\n  'NATURAL [INNER] JOIN',\n  'NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN',\n]);\n\nconst reservedPhrases = ['ON DELETE', 'ON UPDATE'];\n\nexport default class SqliteFormatter extends Formatter {\n  // https://www.sqlite.org/lang_expr.html\n  static operators = ['~', '->', '->>', '||', '<<', '>>', '=='];\n\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedSetOperations,\n      reservedJoins,\n      reservedDependentClauses: ['WHEN', 'ELSE'],\n      reservedPhrases,\n      reservedKeywords: keywords,\n      reservedFunctionNames: functions,\n      stringTypes: [\n        { quote: \"''\", prefixes: ['X'] },\n        // { quote: '\"\"', prefixes: ['X'] }, // currently conflict with \"\" identifiers\n      ],\n      identTypes: [`\"\"`, '``', '[]'],\n      // https://www.sqlite.org/lang_expr.html#parameters\n      paramTypes: { positional: true, numbered: ['?'], named: [':', '@', '$'] },\n      operators: SqliteFormatter.operators,\n    });\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,gBAAgB,GAAG,IAAAC,4BAAA,EAAc,CACrC;AACA,kBAFqC,EAGrC,yBAHqC,EAIrC,MAJqC,EAKrC,OALqC,EAMrC,UANqC,EAOrC,QAPqC,EAQrC,QARqC,EASrC,cATqC,EAUrC,UAVqC,EAWrC,OAXqC,EAYrC,QAZqC,EAarC;AACA;AACA,yEAfqC,EAgBrC,cAhBqC,EAiBrC,QAjBqC,EAkBrC;AACA,oEAnBqC,EAoBrC,KApBqC,EAqBrC;AACA,aAtBqC,EAuBrC;AACA,gDAxBqC,EAyBrC,iDAzBqC,EA0BrC,wBA1BqC,EA2BrC;AACA,aA5BqC,EA6BrC,cA7BqC,EA8BrC,eA9BqC,EA+BrC,iBA/BqC,EAgCrC,WAhCqC,EAkCrC;AACA,YAnCqC,CAAd,CAAzB;AAsCA,IAAMC,qBAAqB,GAAG,IAAAD,4BAAA,EAAc,CAAC,aAAD,EAAgB,QAAhB,EAA0B,WAA1B,CAAd,CAA9B,C,CAEA;;AACA,IAAME,aAAa,GAAG,IAAAF,4BAAA,EAAc,CAClC,MADkC,EAElC,oCAFkC,EAGlC,sBAHkC,EAIlC,sBAJkC,EAKlC,4CALkC,CAAd,CAAtB;AAQA,IAAMG,eAAe,GAAG,CAAC,WAAD,EAAc,WAAd,CAAxB;;IAEqBC,e;;;;;;;;;;;;;WACnB;IAGA,qBAAY;MACV,OAAO,IAAIC,qBAAJ,CAAc;QACnBN,gBAAgB,EAAhBA,gBADmB;QAEnBE,qBAAqB,EAArBA,qBAFmB;QAGnBC,aAAa,EAAbA,aAHmB;QAInBI,wBAAwB,EAAE,CAAC,MAAD,EAAS,MAAT,CAJP;QAKnBH,eAAe,EAAfA,eALmB;QAMnBI,gBAAgB,EAAEC,iBANC;QAOnBC,qBAAqB,EAAEC,iBAPJ;QAQnBC,WAAW,EAAE,CACX;UAAEC,KAAK,EAAE,IAAT;UAAeC,QAAQ,EAAE,CAAC,GAAD;QAAzB,CADW,CAEX;QAFW,CARM;QAYnBC,UAAU,EAAE,SAAO,IAAP,EAAa,IAAb,CAZO;QAanB;QACAC,UAAU,EAAE;UAAEC,UAAU,EAAE,IAAd;UAAoBC,QAAQ,EAAE,CAAC,GAAD,CAA9B;UAAqCC,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;QAA5C,CAdO;QAenBC,SAAS,EAAEf,eAAe,CAACe;MAfR,CAAd,CAAP;IAiBD;;;;EAtB0CC,sB;;;;gBAAxBhB,e,eAEA,CAAC,GAAD,EAAM,IAAN,EAAY,KAAZ,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,C"}